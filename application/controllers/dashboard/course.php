<?php if (!defined('BASEPATH')) exit('No direct script access allowed');class course extends CI_Controller{	function __construct()	{		parent::__construct();				$session_data = $this->session->userdata('admin_user');		if($session_data['admin_user_type_id']==2){			redirect('admin/dashboard');		}				if(!$this->session->userdata('admin_user'))    	{    		redirect('admin/login', 'refresh');    	}    	$this->load->model('course_model');		$this->load->model('user_model');		$this->load->model('city_model');	}	function manage_course()	{		    		$session_data = $this->session->userdata('admin_user');		    $data['username'] = $session_data['admin_username'];			$header['main_page'] = 'manage_course';		    $header['tab'] = 'course';		    $header['username'] =  $data['username'];		    $sidebar['page'] = 'course';		    $sidebar['main_page'] = 'manage_course';		    $sidebar['username'] =  $data['username'];		    		    $footer['main_page'] = 'manage_course';		   $data['course_details'] = $this->course_model->get_course_detail();		   			$this->load->view('admin/parts/header',$header);			$this->load->view('admin/parts/sidebar_left',$sidebar);			$this->load->view('admin/course/manage_course',$data);			$this->load->view('admin/parts/footer',$footer);    		}	function add_course()	{				$this->load->helper(array('form', 'url'));		$this->load->library('form_validation');		    	$session_data = $this->session->userdata('admin_user');		    $data['username'] = $session_data['admin_username'];		    $header['main_page'] = 'add_course';		    $header['tab'] = 'course';		    $header['username'] =  $data['username'];		    $sidebar['page'] = 'course';		    $sidebar['main_page'] = 'add_course';		    $sidebar['username'] =  $data['username'];		    		    $footer['main_page'] = 'add_course';	//by aglram	  		//end by aglram	  			//create error array		$error_arr = array();				// Displaying Errors In Div		//$this->form_validation->set_error_delimiters('<div class="error">', '</div>');				  		  		  if($_SERVER['REQUEST_METHOD']=='POST')		  {			  				$this->form_validation->set_rules('course_title', 'Course Title', 'strip_tags|trim|required|xss_clean');											  if ($this->form_validation->run() == FALSE){				  				$this->load->view('admin/parts/header',$header);		        $this->load->view('admin/parts/sidebar_left',$sidebar);		        $this->load->view('admin/course/add_course',$data);		        $this->load->view('admin/parts/footer',$footer);			} 			else {														$data_addpage = array(				     	'name' => $this->input->post('course_title'),				     	'status' => $this->input->post('status')						);					   			//date_default_timezone_set('UTC');				    $data_addpage['created'] = date('Y/m/d  h:m:s');				$this->course_model->add_course_data($data_addpage);				 						//after successful submission				$this->session->set_flashdata('success', 'You have added course successfully.');				//redirect('admin/event/add_event/');				redirect('admin/course/manage_course/');									  }			  }			  else {							$this->load->view('admin/parts/header',$header);			$this->load->view('admin/parts/sidebar_left',$sidebar);			$this->load->view('admin/course/add_course',$data);			$this->load->view('admin/parts/footer',$footer);							  }			}	function edit_course($id = Null)	{					if($id == NULL)		{			//redirect('admin/event/manage_event');		}				$this->load->helper(array('form', 'url'));		$this->load->library('form_validation');		    	$session_data = $this->session->userdata('admin_user');		    $data['username'] = $session_data['admin_username'];		    $header['main_page'] = 'edit_course';		    $header['tab'] = 'course';		    $header['username'] =  $data['username'];		    $sidebar['page'] = 'course';		    $sidebar['main_page'] = 'edit_course';		    $sidebar['username'] =  $data['username'];		    		    $footer['main_page'] = 'edit_course';		  		$data['course_data'] = $this->course_model->get_course_data_by_id($id);					$error_arr = array();				// Displaying Errors In Div		$this->form_validation->set_error_delimiters('<div class="error">', '</div>');						  		  if($_SERVER['REQUEST_METHOD']=='POST')		  {									$this->form_validation->set_rules('course_title', 'Course Title', 'strip_tags|trim|required|xss_clean');									  			if ($this->form_validation->run() == FALSE){				  				$this->load->view('admin/parts/header',$header);		        $this->load->view('admin/parts/sidebar_left',$sidebar);		        $this->load->view('admin/course/edit_course',$data);		        $this->load->view('admin/parts/footer',$footer);			} 			else {		   																						$data_update_event = array(						 'name' => $this->input->post('course_title'),						 'status' => $this->input->post('status')						);						$data_update_event['updated'] = date('Y/m/d  h:m:s');				$this->course_model->update_course_data($data_update_event,$id);				 $data['course_data'] = $this->course_model->get_course_data_by_id($id);				//after successful submission				$this->session->set_flashdata('success', 'You have updated a course successfully.');				redirect('admin/course/manage_course/');									  }	}			  else {													$this->load->view('admin/parts/header',$header);			$this->load->view('admin/parts/sidebar_left',$sidebar);			$this->load->view('admin/course/edit_course',$data);			$this->load->view('admin/parts/footer',$footer);							  }			}		function delete_course($id=null)	{				if($id!=null){			$status = array('status'=> '0');			$delete = $this->course_model->delete_course_by_id($id,$status);			if($delete==true){				//after successful submission				$this->session->set_flashdata('success', 'You have deactivate course successfully.');				redirect('admin/course/manage_course');			}		}			}		function active_course($id=null)	{				if($id!=null){			$status = array('status'=> 'Active');			$delete = $this->course_model->delete_course_by_id($id,$status);			if($delete==true){				//after successful submission				$this->session->set_flashdata('success', 'You have active course successfully.');				redirect('admin/course/manage_course');			}		}			}	 	function alpha_dash_space($str) {				if( ! preg_match("/^([-a-z_ \"#$%&'()*+,\-.\\:\/;=?@^_])+$/i", $str)){ 					$this->form_validation->set_message('alpha_dash_space', 'The Title Field Should Be Valid');						return FALSE;		}else{ 						return TRUE; 		} 	}			//end by aglram}?>